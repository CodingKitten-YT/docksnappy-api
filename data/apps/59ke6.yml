version: '3.8'

services:
  hatsu_web:
    image: hatsu/hatsu:latest
    ports:
      - "8000:8000" # Expose the default port Hatsu runs on (8000) to the host
    environment:
      - SECURE_COOKIE_SECRET=change_this_for_production
      - ENABLE_TESTSUITE=true
      - MAIL_HOST=smtp.example.com
      - MAIL_PORT=587
      - MAIL_USERNAME=info@example.com
      - MAIL_PASSWORD=your_email_password
    volumes:
      - ./hatsu-data:/var/lib/hatsu
      - ./hatsu:/code
    depends_on:
      - hatsu_db

  hatsu_db:
    image: postgres:13
    environment:
      - POSTGRES_USER=hatsu
      - POSTGRES_PASSWORD=change_this_for_production
      - POSTGRES_DB=hatsu_db
    volumes:
      - hatsu-db-data:/var/lib/postgresql

volumes:
  hatsu-db-data:
  hatsu-data: