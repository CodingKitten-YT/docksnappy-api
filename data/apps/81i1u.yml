version: '3.8'

services:
  app:
    image: picoshare/picoshare:latest
    ports:
      - "9000:9000" # HTTP port
    environment:
      - PICOSHARE_SECRET=your_secret_key
      - TZ=Europe/London  # Set to your timezone (e.g., Europe/Paris, America/New_York)
    healthcheck:
      test: ["CMD", "curl", "--silent", "--fail", "http://localhost:9000/health"]
      timeout: 10s
      interval: 30s
    volumes:
      - "./data:/code/data"
      - "./uploads:/code/public/uploads" # Optional, for user uploads
    networks:
      - picoshares-network

networks:
  picoshares-network:
    driver: bridge