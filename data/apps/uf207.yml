version: '3.8'

services:
  shifter:
    image: shifter/shifter:latest # or you can specify a particular tag if needed
    ports:
      - "5000:5000"
    volumes:
      - ./shifters:/code
      - /var/run/docker.sock:/var/run/docker.sock
    command: >
      shifter server --config=/code/config.yaml \
        --default-address-space="http://example.com" \
        --api-timeout=30s \
        --trusted-addresses=localhost,127.0.0.1
    depends_on:
      - docker
    environment:
      - SHIFTER_SERVER_HOSTNAME=shifter

  docker:
    image: docker:latest # or the version you prefer to run Shifter against

# Define the volumes for persistent storage
volumes:
  shifters:

# Define the networks to be used by the services
networks:
  default:
    driver: bridge