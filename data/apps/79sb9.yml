version: '3'
services:
  lighttpd:
    image: lighttpd/lighttpd:1.45.2-alpine
    container_name: lighttpd
    ports:
      - "80:80" # Map HTTP port 80 on the host to port 80 in the container
    volumes:
      - ./data:/var/www/html # Mount your project directory to the Lighttpd document root
    depends_on:
      - php-fpm

  php-fpm:
    image: php:7.4-fpm
    container_name: php-fpm
    volumes:
      - ./data:/var/www/html # Same volume as Lighttpd to share the PHP code
    ports:
      - "9000:9000" # Map PHP-FPM port 9000 on the host to the same port in the container
    user: "www-data"
    environment:
      - PHP_TIMEZONE=UTC
      - APP_ENV=prod # or any other environment variable you want to set for your application