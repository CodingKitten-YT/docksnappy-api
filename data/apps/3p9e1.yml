version: '3.8'

services:
  flow:
    image: jinaai/jina:latest  # Use the official Jina image
    ports:
      - "8080:8080"  # Expose Jina Flow UI on port 8080 host-side
    volumes:
      - ./data:/data  # Mount a local data directory to store dataset and models
      - ./env:/env  # Mount a local environment file if you have custom configurations
    environment:
      - JINA_NO_TLS=True  # Disable TLS for Flow UI (not recommended for production)
      - JINA_CLI_SKIP_WELCOME_MESSAGE=True  # Skip the welcome message when starting up
    command: flow --port 8080  # Set the port for Jina Flow UI

  adapter-my-adapter:
    image: my/adapter:latest  # Replace with your adapter's image
    environment:
      - ADAPTER_NAME=my-adapter  # Set the adapter name
      - MODEL_PATH=/path/to/model  # Set the path to your model within the container
    depends_on:
      - flow

# Define the network, if needed (Jina uses a custom overlay network by default)
networks:
  jina-network:
    driver: overlay

# Define the volumes, if you want persistent storage for datasets and models
volumes:
  jinadata:
  env_config: