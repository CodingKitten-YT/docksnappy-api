version: '3.8'
services:
  atsimeru:
    image: 'atsimeru/atsimeru:latest' # Use the official Atsumeru image
    container_name: atsimeru
    ports:
      - "8081:8080" # Expose Atsumeru's web UI on host port 8081
    volumes:
      - "./config:/etc/atsimeru/conf.d" # Mount a volume for configuration files
      - "./data:/var/lib/atsimeru" # Mount a volume for data storage
    environment:
      - JVM_OPTS="-Xms512M -Xmx512M" # Set initial and maximum Java heap size to 512MB (adjust as needed)
      - TIMEZONE=America/New_York # Set timezone (change to your desired timezone)
    restart: unless-stopped # Ensure the container restarts if it stops

  postgres:
    image: 'postgres:latest' # Use the official PostgreSQL image
    container_name: atsimeru_db
    volumes:
      - "./data/db:/var/lib/postgresql" # Mount a volume for database data storage
    environment:
      - POSTGRES_DB=atsimeru # Set the default database name to 'atsimeru'
      - POSTGRES_USER=atsimeru # Set the default PostgreSQL username to 'atsimeru'
      - POSTGRES_PASSWORD=atsimerupassword # Set the default PostgreSQL password (change this to a secure password)
    restart: unless-stopped # Ensure the container restarts if it stops

networks:
  atsimeru_net:
    driver: bridge