version: '3.7'

services:
  mylar:
    image: linuxserver/mylar:latest  # Use the official Mylar Docker image from LinuxServer.sg
    container_name: mylar
    port:
      - "8080:80"  # Expose Mylar's default web interface on host port 8080
    environment:
      TZ: "${TZ}"  # Set the timezone, override with `-e TZ=Your/Timezone` when running
      PUID: "${PUID}"  # Set your user ID to run Mylar as a specific user (UidNumber() from User Manage in docker.com)
      PGID: "${PGID}"  # Set your group ID to run Mylar as a specific group (GidNumber() from User Manage in docker.com)
    volumes:
      - mylar_config:/config  # Config and data volume, use `docker-compose down -v` to remove all data on stop
      - mylar_logs:/logs  # Optional log volume for storing logs generated by Mylar
      - downloader_data:/downloads  # Volume for your downloaded files (optional, configure in Mylar's settings)
      - library_media:/library/media  # Volume for your media files (optional, configure in Mylar's settings)
      - library_config:/library/config  # Volume for your library configuration (optional, configure in Mylar's settings)
    restart: unless-stopped  # Ensure Mylar restarts on its own if it stops

volumes:
  mylar_config:
  mylar_logs:
  downloader_data:
  library_media:
  library_config:

networks:
  default:
    external:
      name: nginx-proxy_default_nginx-proxy  # If you're using Nginx Proxy Manager or Traefik as a reverse proxy, set this to the network's name