version: '3.8'
services:
  dpaste:
    image: dpaste/dpaste:latest
    ports:
      - "80:80" # Expose HTTP on the host, default dpaste port is 80
    volumes:
      - "./data:/data" # Mount a local directory to store pastes
      - "./dpaste.conf:/etc/dpaste.conf" # Optional: Mount your own configuration file, if you want to override defaults
    environment:
      - "DPASTE_RUN_AS_USER=1000" # Run dpaste as a specific user (UID), replace 1000 with the desired UID
      - "DPASTE_GROUP_TO_RUN_AS=1000" # Same group as above, replace with the desired GID
    restart: unless-stopped # Restart on failure unless explicitly stopped

  redis:
    image: redis:6.2
    volumes:
      - "./redisdata:/data" # Persist Redis data to a local directory
    environment:
      - "REDIS_PORT=6379" # Default port for Redis
    restart: unless-stopped

networks:
  default:
    driver: bridge