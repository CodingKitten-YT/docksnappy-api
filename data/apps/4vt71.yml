version: '3.8'
services:
  chiefonboarding_web:
    image: chiefonboarding/web:latest
    build:
      context: .
      dockerfile: Dockerfile.web
    ports:
      - "5001:5000" # Example port mapping, adjust as needed
    depends_on:
      - chiefonboarding_api
    environment:
      ENV_VAR_1: value1
      ENV_VAR_2: value2
    volumes:
      - ./web:/usr/src/app
    networks:
      - chiefonboarding_network

  chiefonboarding_api:
    image: chiefonboarding/api:latest
    build:
      context: .
      dockerfile: Dockerfile.api
    ports:
      - "5002:5000" # Example port mapping, adjust as needed
    depends_on:
      - db
    environment:
      ENV_VAR_3: value3
      ENV_VAR_4: value4
    volumes:
      - ./api:/usr/src/app
    networks:
      - chiefonboarding_network

  db:
    image: postgres:12
    environment:
      POSTGRES_DB: chiefonboarding
      POSTGRES_USER: chiefuser
      POSTGRES_PASSWORD: chiefpassword
    volumes:
      - chiefonboarding_db_data:/var/lib/postgresql/data

volumes:
  chiefonboarding_db_data:

networks:
  chiefonboarding_network: