version: '3.8'

services:
  receipt_wrangler:
    image: 'receiptwrangler/receipt-wrangler:latest' # Use the official image or a specific tag
    ports:
      - "5000:5000" # Expose the necessary port if you need to access the service from the host
    environment:
      - API_SECRET_KEY=your_secret_key # Set your secret key for security
      - DATABASE_URL=postgres://user:password@db:5432/dbname # Database connection string
      # Add other environment variables as needed (e.g., for email, logging, etc.)
    volumes:
      - './data:/data' # Mount a volume to persist data
      - './receipt_wrangler.conf:/etc/receipt_wrangler.conf' # Optional: mount configuration file if it's external
    depends_on:
      - db

  db:
    image: 'postgres:latest' # Use the official PostgreSQL image or a specific tag
    environment:
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
      - POSTGRES_DBNAME=dbname
    volumes:
      - './dbdata:/var/lib/postgresql/data' # Mount a volume to persist database data

# Uncomment the following if you need Redis for caching or other state management
# redis:
#   image: 'redis:latest'
#   volumes:
#     - './redisdata:/data'

# Uncomment the following if you need a message queue like RabbitMQ
# message_queue:
#   image: 'rabbitmq:latest'

# Define any networks here if necessary
networks:
  default:
    driver: bridge

# If your application requires external dependencies or services, define them here
# externals:
#   service_name:
#     image: 'some/image:tag'
#     env_config:
#       - KEY=value