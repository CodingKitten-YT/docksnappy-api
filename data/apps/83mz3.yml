version: '3.8'

services:
  ntfy:
    image: ntfy/ntfy:latest
    ports:
      - "8080:80" # Web interface
      - "8125:43": # NTFY server (D-Bus for system notifications)
        expose: true # D-Bus sockets are exposed, but not published to the host.
    volumes:
      - "./ntfy.toml:/etc/ntfy/supervisor.conf:ro" # Configuration file
      - "ntfy_data:/var/spool/postfix" # For emails, if used
      - "ntfy_socket:/run/dbus/system" # For D-Bus integration with system notifications
    user: "1000" # Replace with your user ID to allow volume mounting
    networks:
      - ntfy_net

volumes:
  ntfy_data:
  ntfy_socket:

networks:
  ntfy_net: