version: '3.7'

services:
  rustdesk:
    image: rustdesk/rustdesk:latest  # Use the official RustDesk image
    container_name: rustdesk  # Optional, gives a specific name to the container
    ports:
      - "8080:80"  # Map port 80 from the container to port 8080 on the host for HTTP traffic
    environment:
      - PUID=1000  # Set your User ID (PUID) here, if you want to use a specific UID
      - PGID=1000  # Set your Group ID (PGID) here, if you want to use a specific GID
      - TZ=Europe/London  # Set your timezone, for example Europe/London
      - USER_PASSWORD=changeme  # Set an initial password for the RustDesk user
      - AUTH_TOKEN=changeme  # Set an authentication token for API access (if needed)
    volumes:
      - "${HOME}/.local/share/rustdesk:/data"  # Persist local sessions data
      - "./rustdesk-files:/data/Files"  # Map a local directory to the Files folder inside RustDesk (optional)
      - "./rustdesk-config:/root/.config/rustdesk"  # Map a local directory to the RustDesk configuration (optional)
    restart: unless-stopped  # Ensure the container restarts on failure
    networks:
      - rustdesk_network

networks:
  rustdesk_network:
    driver: bridge  # The network driver, you can choose another one if needed