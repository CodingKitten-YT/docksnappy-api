version: '3.8'

services:
  imaging:
    image: "impodb/imgproxy:latest" # Use the official image from Docker Hub
    restart: "unless-stopped"       # Restart the container unless it has been explicitly stopped
    ports:
      - "80:80"                     # Map port 80 on the host to port 80 in the container for HTTP traffic
      - "443:443"                    # Map port 443 on the host to port 443 in the container for HTTPS traffic (if using SSL)
    environment:
      IMGPROXY_SECRET: "${IMGPROXY_SECRET}" # Secret for image processing (optional, for additional security)
      TZ: "Europe/London"                # Set timezone (change to your desired timezone)
    healthcheck:
      test: ["CMD", "curl", "--fail", "<your-hostname>"]
      timeout: 5s
      interval: 30s
      retries: 5
    networks:
      - imgproxy_network

networks:
  imgproxy_network:
    driver: bridge