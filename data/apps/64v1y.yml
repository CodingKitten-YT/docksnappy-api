version: '3.8'

services:
  homegallery:
    image: homegallery/homegallery:latest
    container_name: homegallery
    ports:
      - "80:80" # Expose HomeGallery web interface on host port 80
    environment:
      TZ: "Your/Timezone,e.g.,Europe/Paris"
      PGID: "100"
      PGUSER: "homegallery"
      PGPASSWORD: "yourpassword" # Set a password for the HomeGallery database user
    volumes:
      - "./config:/etc/homegallery"
      - "./data:/var/lib/postgresql/data"
      - "./media:/srv/homegallery/media"
    depends_on:
      - db
    networks:
      - homegallery_network

  db:
    image: postgres:13
    container_name: homegallery_db
    volumes:
      - "./data:/var/lib/postgresql/data"
    environment:
      POSTGRES_DB: "homegallery"
      POSTGRES_USER: "homegallery"
      PGID: "100" # Same PGID as HomeGallery service
    networks:
      - homegallery_network

networks:
  homegallery_network:
    driver: bridge