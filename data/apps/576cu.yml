version: '3.8'

services:
  movim:
    image: movim/movim:latest
    container_name: movim
    command: /run.sh --background
    restart: unless-stopped
    networks:
      - movim_network
    environment:
      - MOVIM_ADMIN_EMAIL=admin@example.com
      - MOVIM_ADMIN_PASSWORD=changeme
      - PGID=${POSTGRES_USER:?}
      - PUID=${POSTGRES_USER:?}
    volumes:
      - movim-data:/app/data
      - movim-config:/app/config

  postgres:
    image: postgres:latest
    container_name: postgres
    environment:
      - POSTGRES_DB=movim
      - POSTGRES_USER=movim
      - POSTGRES_PASSWORD=changeme
    volumes:
      - postgres-data:/var/lib/postgresql/data
    restart: unless-stopped

networks:
  movim_network:
    driver: bridge

volumes:
  movim-data:
  movim-config:
  postgres-data: