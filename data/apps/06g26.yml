version: '3.8'

services:
  anonaddy:
    image: anonaddy/anonaddy:latest
    container_name: anonaddy
    restart: unless-stopped
    ports:
      - "8080:80" # Maps the application to port 8080 on the host
    environment:
      - APP_KEY=base64:your_app_key_here # Replace with your application key
      - APP_URL=https://your-domain.com # Replace with your domain
      - DB_CONNECTION=mysql
      - DB_HOST=db
      - DB_PORT=3306
      - DB_DATABASE=anonaddy
      - DB_USERNAME=anonaddy_user
      - DB_PASSWORD=your_db_password # Replace with a secure password
      - MAIL_MAILER=smtp
      - MAIL_HOST=your_mail_host # Replace with your mail server
      - MAIL_PORT=587
      - MAIL_USERNAME=your_mail_user # Replace with your mail username
      - MAIL_PASSWORD=your_mail_password # Replace with your mail password
      - MAIL_ENCRYPTION=tls
      - MAIL_FROM_ADDRESS=your_email@example.com # Replace with your sender email
      - MAIL_FROM_NAME="AnonAddy"
    volumes:
      - ./anonaddy/data:/data # Persistent data storage
    depends_on:
      - db

  db:
    image: mysql:8.0
    container_name: anonaddy_db
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD=root_password # Replace with a secure root password
      MYSQL_DATABASE=anonaddy
      MYSQL_USER=anonaddy_user
      MYSQL_PASSWORD=your_db_password # Match this with the DB_PASSWORD above
    volumes:
      - ./anonaddy/db:/var/lib/mysql
