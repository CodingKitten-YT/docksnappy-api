version: '3.8'
services:
  yabin:
    image: 'yabin/yabin:latest' # Use a specific version if needed
    container_name: yabin
    ports:
      - "5001:5000" # Expose the port YABin uses to interact with its backend (default is 5000)
    volumes:
      - ./yabin:/app/yabin # Mount your local yabin directory to the container's yabin directory
      - /etc/localtime:/etc/localtime # Keep your timezone configuration
    environment:
      - YABIN_ALLOW_ALL=True # Set to True to allow all users (be cautious with this in a production environment)
      - JUPYTERHUB_USERNAMES='jovyan,admin' # Define initial users (optional)
      - JUPYTERHUB_TOKEN_EXPIRY=0 # Tokens do not expire (optional, for continuous login)
    environmentFiles:
      - .env # Load environment variables from a .env file if you have one
    depends_on:
      - postgres

  postgres:
    image: 'postgres:13' # Use a specific version of PostgreSQL if needed
    container_name: postgres
    volumes:
      - postgres-data:/var/lib/postgresql # Mount volume for data persistence
    environment:
      - POSTGRES_DB=yabin # Define the database name to use
      - POSTGRES_USER=yabin # Define a user for the database
      - POSTGRES_PASSWORD=yabinpass # Define a password for the user (change this for security)

volumes:
  postgres-data: