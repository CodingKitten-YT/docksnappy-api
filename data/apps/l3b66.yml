version: '3.7'
services:
  paasta:
    image: paasta/paasta-gateway-nginx:latest
    ports:
      - "80:80" # Map HTTP port 80 on the host to port 80 in the container
      - "443:443": # Map HTTPS port 443 on the host to port 443 in the container, if using SSL
    environment:
      PAASTA_PID: "true"
    command: paasta-gateway --config-file=/etc/paas/gateway.ini
    depends_on:
      - rabbitmq
      - mongodb
      - redis
    volumes:
      - ./inventory/gateway.ini:/etc/paas/gateview.ini # Assuming you have a gateway.ini file in the inventory directory
      - ./etc/keystone_authtoken/:/etc/paas/keystone_authtoken/ # Assuming you have keystone authentication setup
    depends_on:
      - keystone
      - mongodb
      - redis
      - rabbitmq