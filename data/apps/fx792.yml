version: '3.8'

services:
  ansible:
    image: ansible:latest
    container_name: ansible_nas
    user: root
    volumes:
      - ./ansible.yml:/etc/ansible/ansible.yml
      - ansible-playbooks:/etc/ansible/playbooks
      - ansible-inventory:/etc/ansibles/inventory
      - ./ansible_key.pem:/root/.ssh/ansible_key.pem
      - ./id_rsa:/root/.solaris/id_rsa
      - nas-data:/mnt/nas
    networks:
      - nas_network

  openmediavault:
    image: linuxserver/openmediavault:latest
    container_name: openmediavault_nas
    ports:
      - "5000:5000" # Web interface (optional)
      - "22:22"     # SSH
    volumes:
      - nas-data:/srv/eminent/data
      - openmediavault-data:/data
    environment:
      - TZ=Europe/London  # Set timezone, change to your preference
      - USER=user       # OpenMediaVault user (default is 'omv')
      - PASSWORD=password  # Set a password for the OpenMediaVault web UI
    restart: unless-stopped
    networks:
      - nas_network

volumes:
  ansible-playbooks:
  ansible-inventory:
  nas-data:
    driver: local
  openmediavault-data:

networks:
  nas_network: