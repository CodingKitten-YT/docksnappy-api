version: '3.8'

services:
  starbase-server:
    image: starbase/starbase-node:latest
    ports:
      - "3000:3000" # Web server port (you can change this if you prefer a different port)
    environment:
      STARBASE_LICENSE_KEY: your_license_key_here # Replace with your license key
      PG_HOST: database
      PG_USER: starbase
      PG_PASSWORD: starbase_password
      PG_DBNAME: starbase
    depends_on:
      - database
    restart: unless-stopped

  database:
    image: postgres:13 # Use the desired PostgreSQL version
    environment:
      POSTGRES_USER: starbase
      POSTGRES_PASSWORD: starbase_password
      POSTGRES_DB: starbase
    volumes:
      - starbase-db-data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  starbase-db-data: