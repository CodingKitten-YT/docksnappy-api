version: '3.8'

services:
  isso:
    image: 'isso/isso:latest' # Use the latest tag or a specific version you prefer
    container_name: isso
    ports:
      - "3000:3000" # Isso default port exposed to the host
    volumes:
      - "./data:/code" # The path where your data will be stored on the host, mapped to /code in the container
      - isso-redis-1:/etc/localstack/data
      - isso-postgres-1:/var/lib/postgresql/data
    depends_on:
      - redis
      - postgres
    environment:
      REDIS_URL: 'redis://redis:6379'
      DATABASE_URL: 'postgres://postgres:5432/isso'
      SECRET_KEY: 'your-secret-key' # Replace with a secret key for your installation
      DEBUG: 1 # Set to 0 in production
    networks:
      - isso-network

  redis:
    image: 'redis:latest'
    container_name: redis
    networks:
      - isso-network

  postgres:
    image: 'postgres:latest'
    container_name: postgres
    environment:
      POSTGRES_DB: isso
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: your-db-password # Replace with a strong password for your database
    networks:
      - isso-network

networks:
  isso-network:
    driver: bridge