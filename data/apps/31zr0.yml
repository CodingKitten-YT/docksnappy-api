version: '3.8'
services:
  gerbera:
    image: 'linnovate/gerbera:latest' # Use the official Gerbera DNS/DHCP server image
    container_name: gerbera
    ports:
      - "67:67/udp"       # DHCP server
      - "68:68/udp"       # DHCP client and BOOTP client
      - "53:53/tcp"       # DNS server for unicast DNS queries
      - "53:53/udp"       # DNS server (also listens on multicast 224.0.0.22)
    volumes:
      - "./config:/etc/gerbera" # Mount a volume for Gerbera configuration files
      - "./leases:/var/lib/dnsmasq" # Optional: Mount a volume to persist DHCP leases (recommended)
    environment:
      - TZ="Europe/Madrid" # Set the timezone, adjust to your needs
    restart: unless-stopped

networks:
  gerbera_net:
    driver: bridge