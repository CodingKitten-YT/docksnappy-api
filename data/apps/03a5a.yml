version: '3.8'
services:
  # Organizr service
  organizr:
    image: 'linuxserver/organizr' # or use the official one if available
    container_name: 'Organizr'
    ports:
      - "5000:5000" # HTTP port
      - "5001:5001" # Web Admin UI (optional)
    environment:
      - PUID=1000
      - PWD=1000
      - TZ=Europe/London
      # Use the following if using the official image
      # - USER_ROOT_PASSWORD=yourpassword
      # - USER_SEARCH_API_KEY=yoursearchapikey
    volumes:
      - 'organizr-config:/config'
      - 'organizr-data:/data'
    restart: unless-stopped

  # PostgreSQL service for Organizr (default database)
  db:
    image: postgres:13
    container_name: 'OrganizrDB'
    volumes:
      - 'organizr-db:/var/lib/postgresql/data'
    environment:
      - DB_USER=organizr
      - DB_PASSWORD=yourpassword
      - DB_DATABASE=organizr
      - POSTGRES_DB=organizr
    restart: unless-stopped

  # Optional LetsEncrypt service for HTTPS (requires DNS setup)
  lee:
    image: 'letsencrypt/certbot'
    container_name: 'LECertbot'
    volumes:
      - 'organizr-le:/etc/letsencrypt'
      - 'organizr-conf:/config'
    restart: unless-stopped
    depends_on:
      - organizr
    environment:
      - EMAIL=youremail@example.com
      - DOMAIN=yourdomain.org # Your domain (with www.)
      - AGREE_TERMS=true
    ports:
      - "80:80"
      - "443:443"

# Volumes for data and configuration persistence
volumes:
  organizr-config:
  organizr-data:
  organizr-db:
  organizr-le:

# Network setup (optional, uncomment if you have custom networks)
networks:
  default:
    driver: bridge