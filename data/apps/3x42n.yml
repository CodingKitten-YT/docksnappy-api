version: '3.8'

services:
  gatus_api:
    image: quay.io/kubewatch/gatus:v0.14.0 # Use the latest or specific version tag you prefer
    ports:
      - "9090:9090"
    resources:
      limits:
        memory: 500Mi
      requests:
        cpu: 100Mi
        memory: 256Mi
    command:
      "-v=info,warn,error" # Set the desired log level (debug, info, warn, error)
      - "--ca-file=/etc/pki/root/ca.crt"
      # Add any additional Gatus API command-line flags here
    volumeMounts:
      - name: gatus-api-storage, mountPath: /tmp
        readOnly: true
    volumes:
      gatus-api-storage:
        driver: local

  prometheus:
    image: quay.io/prometheus/prometheus:v2.23.0 # Use the latest or specific version tag you prefer
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus/data'
    volumes:
      prometheus_data:
        driver: local

  grafana:
    image: grafana/grafana:v8.1.3 # Use the latest or specific version tag you prefer
    ports:
      - "3000:3000"
    environment:
      GF_SECURITY_ADMIN_PASSWORD: 'your_very_secure_password' # Change to a strong password or use an environment variable for secrets
    volumes:
      grafana_data:
        driver: local

volumes:
  gatus-api-storage:
  prometheus_data:
  grafana_data: