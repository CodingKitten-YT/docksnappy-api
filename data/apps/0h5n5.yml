version: '3.8'

services:
  liblephotos:
    image: linuxserver/liblephos-docker:latest
    container_name: liblephotos
    ports:
      - "6421:6421" # Admin Interface (WebUI)
      - "5000:5000" # Goldmansachs OMV/Database (if enabled)
    volumes:
      - "./config:/config" # Configuration and Import Maps
      - "./data:/data"     # Main Application Data
      - "./cache:/cache"   # Cached files and thumbnails
      # Uncomment the following if you want to enable the backup feature
      # - "./backups:/backups"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ="Europe/London"
      # Optional, replace with your domain or subdomain
      - DOMAIN=yourdomain.tld
      # Uncomment to enable LDAP
      #- ENABLELDAP=true
      # Uncomment and provide the necessary credentials if you want to enable LDAP
      #- LDAP_SERVER=ldapserver.com
      #- LDAP_USER=CN=username,OU=Users,DC=example,DC=com
      #- LDAP_PASSWORD=password
      # Uncomment and provide the necessary credentials for PostgreSQL if you want to enable it
      #- PGDATABASE=yourdbname
      #- PGUSER=yourdbuser
      #- PGPASSWORD=yourdbpassword
    restart: unless-stopped
    networks:
      - home-network

  database:
    image: postgres:latest
    container_name: liblephotos_database
    volumes:
      - "./data/db:/var/lib/postgresql"
    environment:
      - POSTGRES_DB=liblephos
      - POSTGRES_USER=liblephos
      - POSTGRES_PASSWORD=liblephosphotpass
    restart: unless-stopped
    networks:
      - home-network

networks:
  home-network:
    driver: bridge