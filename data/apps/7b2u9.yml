version: '3.8'
services:
  neonlink-api:
    image: "neonlink/neonlink-api:latest"
    ports:
      - "80:80" # Expose HTTP port (adjust the host port as needed)
    command: server --config=/app/config.json # Ensure your config.json is in the correct location within the image or container
    depends_on:
      - database
    environment:
      DATABASE_HOST: database
      DATABASE_USERNAME: neonlink
      DATABASE_PASSWORD: your_password # Replace with your actual password
      DATABASE_DB: neonlink_db # Your database name
    volumes:
      - ./app/config.json:/app/config.json # Mount your local config file to the container
      - neonlink-api-persistent:/app/data # Optional volume for data persistence

  database:
    image: "postgres:latest"
    command: postgres --password='your_password' # Replace with your actual password
    volumes:
      - db-data:/var/lib/postgresql/data # Persistent storage for the database data

  redis:
    image: "redis:latest"
    command: redis-server --appendonly yes # Enable append only mode for persistence

volumes:
  neonlink-api-persistent:
  db-data:

networks:
  default:
    name: neonlink_network # Optional: Define a custom network for your services