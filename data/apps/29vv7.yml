version: '3.8'

services:
  jellyfin:
    image: linuxserver/jellyfin:latest
    container_name: jellyfin
    ports:
      - "8090:8090" # HTTP
      - "8091:8091" # WebUI (HTTPS) with certificate-support container
    volumes:
      - "/path/to/your/data:/data" # Replace with the path to your data volume
      - "/path/to/your/config:/config" # Replace with the path to your configuration volume
      - "/path/to/your/media:/media" # Replace with the path to your media volume
    environment:
      - TZ=Your/Timezone # Example: "America/New_York"
      - PUID=1000
      - PGUID=1000
      - TAUTOMOUNT=1
      - INSTALL_MYSQL=0
      - EMBEDDED_DB=true # Use this if you want to use the built-in SQLite db
    restart: unless-stopped
    networks:
      - jellyfin_net

  database:
    image: postgres:13
    container_name: jellyfin_db
    volumes:
      - "/path/to/your/db_data:/var/lib/postgresql" # Replace with the path to your database data volume
    environment:
      - DB_USER=jellyfin
      - DB_PASSWORD=jellyfin_password # Change this to a strong password
      - DB_NAME=jellyfin
    restart: unless-stopped
    networks:
      - jellyfin_net

  monitor:
    image: linuxserver/monitoring_elk:latest
    container_name: jellyfin_monitor
    volumes:
      - "/path/to/your/log:/var/log/jellyfin" # Replace with the path to your log volume
    environment:
      - LOGSTASH_PASSWORD=logstash_password # Change this to a strong password
      - ELASTICSEARCH_USERNAME=admin
      - ELASTICSEARCH_PASSWORD=search_password # Change this to a strong password
    depends_on:
      - jellyfin
    networks:
      - jellyfin_net

networks:
  jellyfin_net: