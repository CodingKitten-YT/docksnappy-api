version: '3.8'

services:
  gatling:
    image: typesafe/ganymede:latest # Use the official Ganymede (Gatling) Docker image from Typesafe
    container_name: ganymede
    environment:
      - JVM_OPTS=-Xms1g -Xmx4g
    ports:
      - "8080:8080" # Expose Gatling UI on port 8080
    volumes:
      - ./ganymede-reports:/app/target/reports # Mount a local directory for report storage
      - ./ganymede-configs:/app/conf # Mount a local directory for configuration files
    command: ganymede

  database:
    image: postgres:latest
    container_name: database
    environment:
      - POSTGRES_USER=gatling
      - POSTGRES_PASSWORD=gatling
      - POSTGRES_DB=gatling
    volumes:
      - db-data:/var/lib/postgresql/data # Use a named volume for persistent data

volumes:
  db-data: