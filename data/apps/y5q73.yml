version: '3.8'

services:
  navidrome:
    image: navidrome/navidrome:latest # Use the official Navidrome image from Docker Hub
    container_name: navidrome
    command: /run.sh -conf /root/.config/navidrome --background & tail -f /dev/null
    ports:
      - "80:80" # Expose web UI on host port 80
      - "8432:8432" # Socket for Android client (optional, remove if not needed)
      - "5348236:5348236" # WebSocket for web frontend (optional, remove if not needed)
    volumes:
      - "./config:/root/.config/navidrome:rw" # Mount your configuration directory
      - "./music:/root/Music" # Mount your music files directory
      - "./cache:/root/.cache/navidrome" # Optional cache directory (for caching downloaded covers, etc.)
    environment:
      TZ: "Your/Timezone" # Set your time zone
    restart: unless-stopped # Restart on failure or if the container is stopped
    networks:
      - navidrome_network

networks:
  navidrome_network:
    driver: bridge