version: '3.7'
services:
  nginx-proxy-manager:
    image: nginxpm/nginx-proxy-manager:latest
    container_name: nginx-proxy-manager
    ports:
      - "80:80" # HTTP port
      - "443:443" # HTTPS port
      - "81:81" # Admin interface port
    volumes:
      - ./data:/etc/nginx-proxy-manager:ro
      - ./letsencrypt:/etc/letsencrypt
      - ./nginxpm_conf.yaml:/etc/nginx-proxy-manager/nginxpm_conf.yaml:ro # (optional) if you have a custom configuration file
    networks:
      - webnet
    restart: unless-stopped

  letsencrypt:
    image: certbot/certbot
    volumes:
      - ./letsencrypt:/etc/letsencrypt
    networks:
      - webnet

networks:
  webnet:
    driver: bridge