version: '3.7'

services:
  pihole:
    image: pihole/pihole:dev
    container_name: pi_hole
    ports:
      - "53:53/tcp" # DNS port
      - "67:67/udp"  # DNS port for unbound (optional, if using as a DNS resolver)
      - "80:80/tcp"  # HTTP interface port
    restart: unless-stopped
    volumes:
      - "/etc/pihole/:/etc/pihole/"
      - "/var/lib/pihole/:/var/lib/pihole/"
      - "./gravity.pot:/etc/pihole/gravity.pot" # Optional, for custom local Gravity configurations
    environment:
      TZ: "Your/Timezone" # Replace with your timezone, e.g., Europe/London
    networks:
      - pi_home_network

  unbound:
    image: pihole/unbound-pihole:dev
    container_name: pi_hole_unbound
    depends_on:
      - pihole
    ports:
      - "67:67/udp"  # DNS port for unbound (optional, if using as a DNS resolver)
      - "8080:8080"   # Web admin interface for Unbound (optional)
    restart: unless-stopped
    volumes:
      - "/var/lib/pihole/:/var/lib/pihole/"
    environment:
      SERVER_ROOTERS: "127.0.0.1" # Replace with the IP of your pihole service if different
      TZ: "Your/Timezone" # Replace with your timezone, e.g., Europe/London
    networks:
      - pi_home_network

networks:
  pi_home_network:
    driver: bridge