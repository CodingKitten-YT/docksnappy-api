version: '3.8'

services:
  coralproxy:
    image: coralproject/coral-proxies:latest
    container_name: coralproxy
    ports:
      - "8080:80" # Proxy HTTP port
      - "8181:81" # Proxy HTTPS port (only if you want to enable SSL)
    environment:
      GOOGLE_APPLICATION_CREDENTIALS: /path/to/your/google-key.json # Set this if you are using Cloudflare Areas with Google Identity
      CORAL_RADIUS_SECRET: a_very_secure_password # Set your own secret for authentication
    networks:
      - coralnetwork

  coralauth:
    image: coralproject/coral-auth:latest
    container_name: coralauth
    environment:
      CORAL_RADIUS_SECRET: a_very_secure_password # Same secret as Coral Proxy
      AUTH_LDAP_URL: ldap://your.ldap.server:389/ # Your LDAP server configuration
      AUTH_LDAP_BIND_DN: "cn=admin,dc=example,dc=com"
      AUTH_LDAP_BIND_PASSWORD: your_ldap_bind_password
    networks:
      - coralnetwork

  coralacme:
    image: coralproject/coral-acme:latest
    container_name: coralacme
    environment:
      CORAL_RADIUS_SECRET: a_very_secure_password # Same secret as Coral Proxy and Coral Auth
      ACME_EMAIL: your@email.com # Your email for Let's Encrypt
      ACME_AGREE_TERMS: true # Accept Let's Encrypt terms (true or false)
    networks:
      - coralnetwork

  coralcontrol:
    image: coralproject/coral-control:latest
    container_name: coralcontrol
    environment:
      CORAL_RADIUS_SECRET: a_very_secure_password # Same secret as Coral Proxy and Coral Auth
      CONTROL_PANEL_URL: http://coralproxy:8080 # URL to your Coral Proxy service
    networks:
      - coralnetwork

networks:
  coralnetwork:
    driver: bridge