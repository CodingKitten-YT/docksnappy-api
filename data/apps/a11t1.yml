version: '3.8'

services:
  pelican-panel:
    image: 'grabli/pelican-panel:latest' # Use the official Pelican Panel Docker image
    container_name: pelican-panel
    ports:
      - "5000:5000" # Expose the default port Pelican Panel runs on for web access
    volumes:
      - ./pelican_projects:/usr/src/app/pelican_projects # Mount your local Pelican projects directory to the container's projects directory
      - ./pelican_themes:/usr/src/app/pelican_themes # Mount your local Pelican themes directory to the container's themes directory
    environment:
      - PELICAN_PANEL_SETTINGS_MODULE=myproject.settings  # Optional: Specify a custom Django settings module if needed
    depends_on:
      - db

  db:
    image: postgres:13-alpine # Use PostgreSQL 13 as the database server
    container_name: pelican-db
    volumes:
      - db-data:/var/lib/postgresql/data # Mount a named volume for persistent database storage

volumes:
  db-data:
    driver: local  # Use 'local' storage driver