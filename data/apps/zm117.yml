version: '3.8'

services:
  gotenberg:
    image: gotenberg/gotenberg:latest
    container_name: gotenberg
    ports:
      - "4000:4000" # HTTP API
      - "8000:8000" # Admin UI (optional, useful for local development)
    volumes:
      - "./config:/etc/gotenberg"
      - "./certs:/etc/letsencrypt" # If you have SSL certificates and want to use Let's Encrypt
      - "./images:/var/lib/gotenberg/uploads" # User files storage, change path according to your setup
    environment:
      - "TZ=Europe/Madrid" # Set timezone according to your need
      - "GOTENBERG_DB_HOST=db"     # If you are using a linked db service
      - "GOTENBERG_DB_USER=gotenberg"  # If you are using a linked db service
      - "GOTENBERG_DB_PASSWORD=secret" # If you are using a linked db service
      - "GOTENBERG_DB_NAME=gotenberg"   # If you are using a linked db service
      - "GOTENBERG_DB_DRIVER=mysql"     # Set the database driver (mysql, postgres or sqlite3)
    networks:
      - gotenberg_network

  db:
    image: postgres:latest
    environment:
      - POSTGRES_USER=gotenberg
      - POSTGRES_PASSWORD=secret
      - POSTGRES_DB=gotenberg
    volumes:
      - "./db_data:/var/lib/postgresql" # Database data storage, change path according to your setup
    networks:
      - gotenberg_network

networks:
  gotenberg_network:
    driver: bridge