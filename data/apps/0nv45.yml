version: '3.8'

services:
  onedev:
    image: onedev/onedev:latest
    container_name: onedev
    ports:
      - "8080:8080" # HTTP interface
      - "7930:22"     # SSH (optional, if you want to access via SSH)
    volumes:
      - "./onedev-data:/var/lib/onedev"
      - "./.ssh/.authorized_keys:/root/.ssh/authorized_keys" # If using SSH
      - "./onedev/config.yml:/etc/onedev/config.yml"         # Custom configuration file
    environment:
      - TZ=Europe/London  # Set the timezone, for example Europe/London
      - ONEDDEV_SERVER_HOSTNAME=myhost.example.com  # Set the hostname if needed
      - ONEDEV_SERVER_DOMAIN=mydomain.example.com  # Set the domain if needed
    networks:
      - onedev-network

networks:
  onedev-network: