version: '3.8'

services:
  app:
    image: photoprism/photoprism:latest
    container_name: photoprism
    ports:
      - "5000:5000" # HTTP interface
      - "9000:9000" # WebUI (Admin UI)
    volumes:
      - './config:/data' # Configuration and uploads
      - './cache:/cache'  # Thumbnail cache (optional, but recommended for performance)
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Berlin  # Set your timezone, e.g., Europe/London
    restart: unless-stopped
    networks:
      - photo_network

  db:
    image: postgres:latest
    container_name: photoprism_db
    volumes:
      - './db:/var/lib/postgresql'
    environment:
      - POSTGRES_DB=photoprism
      - POSTGRES_USER=photoprism
      - POSTGRES_PASSWORD=photoprism
    restart: unless-stopped
    networks:
      - photo_network

networks:
  photo_network:
    driver: bridge