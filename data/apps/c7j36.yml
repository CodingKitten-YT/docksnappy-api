version: '3.8'

services:
  docking:
    image: docking/docking:latest
    container_name: docking
    ports:
      - "5000:5000" # The default port for DocKing API
    volumes:
      - "./data:/app/data" # Mount your local data directory to the container's data directory
      - "./conf:/etc/docking" # Mount your local configuration directory to the container's configuration directory (optional, for custom config)
    environment:
      DOCKING_LICENSE: "your-license-key" # Set your DocKing license key if needed
      JAVA_OPTS: "-Xms512m -Xmx512m" # Set Java heap size (optional)
    command: run --config /etc/docking
    restart: unless-stopped

  postgres:
    image: postgres:latest
    container_name: docking_postgres
    volumes:
      - "./data/db:/var/lib/postgresql/data" # Mount your local database data directory to the container's data directory
    environment:
      POSTGRES_DB: "docking"
      POSTGRES_USER: "docking"
      POSTGRES_PASSWORD: "yourpassword"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U docking"]
      timeout: 10s
      retries: 5
    restart: unless-stopped

networks:
  default:
    name: docking_network