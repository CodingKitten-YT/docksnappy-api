version: '3.8'

services:
  rgit:
    image: 'rgit/rgit:latest' # Use the official rgit Docker image
    container_name: rgit
    ports:
      - "5000:5000" # Expose the default port rgit runs on
    volumes:
      - type: bind
        source: /path/to/local/rgit/repo # Path to your local Git repository
        target: /app/repo # Path inside the container where rgit will be deployed
      - type: bind
        source: /path/to/local/cache # Path to your local cache directory (optional, for caching git objects)
        target: /app/cache # Path inside the container for the cache
    environment:
      GIT_USERNAME: 'YourUsername' # Set a username for Git operations
      GIT_EMAIL: 'your-email@example.com' # Set an email for Git operations
      RGIT_HOST: '0.0.0.0' # Allow access from any IP
    restart: unless-stopped # Restart the container on failure or if it exits

networks:
  rgit_net:
    driver: bridge