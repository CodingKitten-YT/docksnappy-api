version: '3.7'

services:
  node-red:
    image: node red-palette
      container_name: node-red
      ports:
        - "8080:8080": # Node-RED runs on port 8080 by default
      depends_on:
        - mongo
      environment:
        # Change the default password for red user
        NODE_RED_USER_PASSWORD: 'your_secure_password'
        MONGO_USERNAME: 'node-red'
        MONGO_PASSWORD: 'node-red'
      volumes:
        - ./flows:/data/flows # Load your custom flows on container startup
      networks:
        - node-red_network

  mongo:
    image: mongo
    container_name: mongo
    command: --smallfiles
    ports:
      - "27017:27017" # MongoDB runs on port 27017 by default
    volumes:
      - mongodata:/data/db # Persist MongoDB data

  mongo-express:
    image: mongo-express
    container_name: mongo-express
    ports:
      - "8000:8000" # Mongo Express runs on port 8000 by default
    environment:
      ME_DEBUG: 'off' # Optional: Set to 'on' for debug mode
      ME_USERNAME: 'admin'
      ME_PASSWORD: 'admin-password'
    depends_on:
      - mongo
    volumes:
      - mongodata:/data/db

volumes:
  mongodata:
    driver: local