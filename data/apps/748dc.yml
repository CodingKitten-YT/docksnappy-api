version: '3.8'

services:
  answer:
    image: 'answerae/docker-answer:latest' # Use the official Docker image for Answer
    ports:
      - "5000:5000" # Expose the fastAPI server on port 5000
    environment:
      - ALLOWED_HOSTS=0.0.0.0 # Allow connections from any host
    command: uvicorn answer:app --host 0.0.0.0 --port 5000 --reload # Load the app with debug mode for auto-reloading on code changes

  redis:
    image: 'redis:6'
    command: 'redis-server --appendonly yes' # Enable append only mode to persist data

volumes:
  answer_data:
    driver: local

networks:
  default:
    name: answer_network