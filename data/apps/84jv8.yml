version: '3.8'

services:
  sqlpage:
    image: sqlpage/sqlpage:latest # Use the official SQLPage image from Docker Hub
    ports:
      - "5000:5000" # Map the internal port 5000 of SQLPage to port 5000 on the host, for web interface access
    volumes:
      - ./data:/data # Mount a volume to persist SQLPage data and database files
    environment:
      - TZ=Europe/London # Set the timezone (change to your desired timezone)
    restart: unless-stopped # Automatically restart the service unless it has been manually stopped

  postgres:
    image: postgres:latest # Use the official PostgreSQL image from Docker Hub
    volumes:
      - ./data/postgres:/var/lib/postgresql # Mount a volume for Persistent storage of PostgreSQL data
    environment:
      - POSTGRES_DB=sqlpage # Database name for SQLPage
      - POSTGRES_USER=sqlpage # Username for the database
      - POSTGRES_PASSWORD=changeit # Password for the database
    restart: unless-stopped # Automatically restart the service unless it has been manually stopped

networks:
  default:
    name: sqlpage_network # Define a network name to be used by SQLPage and other services if needed