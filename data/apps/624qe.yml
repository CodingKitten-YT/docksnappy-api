version: '3.8'

services:
  jellyfin:
    image: jellyfin/jellyfin-arr:latest  # Use the official Docker image for Jellyfin and Arr (WebUI)
    container_name: jellyfin
    ports:
      - "8090:80"  # Map port 80 from the container to port 8090 on the host for WebUI access
      - "8080:80"  # Map port 80 from the container to port 8080 on the host for PMS API and Docker API
    volumes:
      - "${HOME}/.config/jellyfin:/config"  # Persist local Jellyfin configuration
      - "/var/lib/docker/volumes/jellyfin_data/:/data"  # Persist media files (Docker host path needs to be created)
      - "/media:/media"  # Optional: Mount a host media directory if you want to access it directly
    environment:
      - PUID=1000  # Set Process User ID, must match the UID of the user that owns the data volume
      - PGID=1000  # Set Process Group ID, must match the GID of the user that owns the data volume
      - TZ=Europe/London  # Set Timezone, change to your local timezone
      - JELLYFIN_ENABLE_UPNP=false  # Optional: Disable uPNP if not needed
    restart: unless-stopped
    networks:
      - jellyfin_network

networks:
  jellyfin_network:
    driver: bridge

volumes:
  jellyfin_data: