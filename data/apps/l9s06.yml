version: '3'
services:
  jump-server:
    image: pulumijump/jump-server:latest
    ports:
      - "8080:8080" # HTTP API
    environment:
      JUMP_DATABASE_HOST: jump-db
      JUMP_DATABASE_NAME: jump
      JUMP_DATABASE_USER: jumpuser
      JUMP_DATABASE_PASSWORD: jumpsecret
      JUMP_SECRET_KEY: 'change_this_to_a_strong_secret'
    depends_on:
      - jump-db

  postgres:
    image: postgres:latest
    environment:
      POSTGRES_USER: jumpuser
      POSTGRES_PASSWORD: jumpsecret
    volumes:
      - jump-data:/var/lib/postgresql/data

  redis:
    image: redis:latest

volumes:
  jump-data: