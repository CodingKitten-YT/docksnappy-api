version: '3.8'

services:
  lychee:
    image: lycheeapp/lychee:latest
    container_name: lychee
    ports:
      - "80:80" # HTTP port
      - "443:443" # HTTPS port (if using SSL)
    volumes:
      - "./data:/var/www/html" # Local directory to store user uploads and application data
      - "./config:/etc/lychee" # Optional, if you want to configure Lychee externally
      - "/var/run/docker.sock:/var/run/docker.sock:ro" # Required for Docker in Docker (if necessary)
    environment:
      - PUID=1000 # Replace with your user ID to allow the container to write to the host volume
      - PGID=1000 # Replace with your group ID
      - TZ=Europe/Paris # Set your timezone, e.g., Europe/London, America/New_York, etc.
      - MYSQL_DATABASE=lychee # The database name for the initial setup
      - MYSQL_USER=root # The database user for the initial setup
      - MYSQL_PASSWORD=yourpassword # The database password for the initial setup
    restart: unless-stopped
    networks:
      - lychee_network

networks:
  lychee_network:
    driver: bridge