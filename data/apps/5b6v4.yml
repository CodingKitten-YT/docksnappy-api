version: '3.8'
services:
  hyper_switch:
    image: 'hyperorchestrator/hyperswitch:latest'
    container_name: hyperswitch
    environment:
      - ENABLE_WEB_UI=1
      - DB_TYPE=mysql
      - DB_USERNAME=hyperdbuser
      - DB_PASSWORD=hyperdbpass
      - DB_DATABASE=hyperswitch
      - DB_HOST=hyperdb_1
      - REDIS_URL=redis_1:6379
    ports:
      - "8080:8080" # Web UI
      - "5432:5432"  # PostgreSQL (optional, if using PostgreSQL)
      - "6379:6379"  # Redis (optional, if using Redis)
    volumes:
      - './hyper_switch/:/data'
    depends_on:
      - hyperdb_1
      - redis_1
    networks:
      - hyperswitch_network

  hyper_switch_db:
    image: 'mysql:latest'
    container_name: hyperdb
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: hyperswitch
      MYSQL_USER: hyperdbuser
      MYSQL_PASSWORD: hyperdbpass
    volumes:
      - './hyper_switch_db/:/var/lib/mysql'
    networks:
      - hyperswitch_network

  redis:
    image: 'redis:latest'
    container_name: redis
    ports:
      - "6379:6379"
    volumes:
      - './hyper_switch_redis/:/data'
    networks:
      - hyperswitch_network

networks:
  hyperswitch_network:
    driver: bridge