version: '3.8'

services:
  bitmagnet_app:
    image: bitmagnet/bitmagnet:latest # Use the official BitMagnet image or a specific tag
    ports:
      - "5000:5000" # Expose the port where the Flask app is running (default for Flask)
    environment:
      - APIKEY=your_api_key # Set the API key if required by your application
    volumes:
      - "./bitmagnet:/app" # Mount your local BitMagnet directory to the container's directory
    depends_on:
      - bitmagnet_db

  bitmagnet_db:
    image: postgres:13 # Use PostgreSQL official image with version 13
    volumes:
      - postgres_data:/var/lib/postgresql/data # Use a named volume for persisting database data

    environment:
      - POSTGRES_DB=bitmagnet # Define the database name
      - POSTGRES_USER=bitmagnet # Define the PostgreSQL username
      - POSTGRES_PASSWORD=your_db_password # Define the PostgreSQL password

volumes:
  postgres_data:
    driver: "local" # Use local volume driver to persist data on your host machine