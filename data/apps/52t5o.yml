version: '3.8'

services:
  fider:
    image: fider/fider:latest # Use the specific version you need, e.g., 'fider/fider:vX.Y.Z'
    container_name: fider
    ports:
      - "5000:5000" # Web interface on port 5000
    environment:
      FIDER_DB_HOST: db
      FIDER_DB_NAME: fider
      FIDER_DB_PASSWORD: rootisbest
      FIDER_DB_USER: fider
      FIDER_REDIS_HOST: redis
      FIDER_SECRET_KEY: very_secret_key_that_you_should_change
      FIDER_ADMIN_EMAIL: admin@example.com
      FIDER_ADMIN_USERNAME: admin
      FIDER_SMTP_HOST: smtp
      FIDER_SMTP_PORT: 25
      FIDER_SMTP_USERNAME: null
      FIDER_SMTP_PASSWORD: null
    volumes:
      - ./fider-data:/data/db
      - ./fider-uploads:/data/uploads
    depends_on:
      - db
      - redis
      - smtp
    networks:
      - fider_network

  db:
    image: postgres:latest # Use the specific version you need, e.g., 'postgres:vX.Y'
    volumes:
      - db-data:/var/lib/postgresql/data
    environment:
      POSTGRES_DB: fider
      POSTGRES_USER: fider
      POSTGRES_PASSWORD: rootisbest

  redis:
    image: redis:latest # Use the specific version you need, e.g., 'redis:vX.Y'

  smtp:
    image: postfix:latest # Use the specific version you need, e.g., 'postfix:vX.Y'
    volumes:
      - smtp-data:/var/spool/mail
    environment:
      POSTFIX_MYHOSTNAME: fider.example.com

volumes:
  db-data:
  fider-data:
  fider-uploads:
  smtp-data:

networks:
  fider_network: