version: '3.8'
services:
  judge0-api:
    image: judge0/judge0-ce:latest
    ports:
      - "4000:4000" # Admin UI (change the host port if needed)
      - "8000:8000" # Public contest viewer (change the host port if needed)
    environment:
      - JUDGE0_API_SECRET=secret
      - JUDGE0_API_DEBUG=true
    volumes:
      - ./data:/data
    depends_on:
      - postgres

  postgres:
    image: postgres:13
    environment:
      - POSTGRES_DB=judge0
      - POSTGRES_USER=judge0
      - POSTGRES_PASSWORD=judge0
    volumes:
      - judge0-db:/var/lib/postgresql/data

volumes:
  judge0-db: