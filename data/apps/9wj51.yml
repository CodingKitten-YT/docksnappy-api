version: '3.8'

services:
  homer:
    image: homer/homer:latest  # Use the official Homer image from Docker Hub
    container_name: homer
    ports:
      - "80:80"  # Map HTTP port 80 on the host to port 80 in the container
    environment:
      - HOMEPATH=/data  # Define the data storage path
      - TZ=Europe/London  # Set the timezone (change to your desired timezone)
    volumes:
      - ./homer-data:/data  # Mount a local directory for Homer's data and configuration files
      - homer-logs:/var/log/homer  # Mount a volume for Homer logs (optional, but recommended for persistence)

  postgres:
    image: postgres:latest
    environment:
      - POSTGRES_DB=homer
      - POSTGRES_USER=homer
      - POSTGRES_PASSWORD=homerdocker
    volumes:
      - homer-postgres-data:/var/lib/postgresql/data  # Persist PostgreSQL data

  redis:
    image: redis:latest
    volumes:
      - redis-data:/data

volumes:
  homer-logs:
  homer-postgres-data:
  redis-data:

networks:
  default:
    driver: bridge