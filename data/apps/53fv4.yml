version: '3.8'

services:
  app:
    image: exbin/exbin:latest # Use the official or specific tag as needed
    ports:
      - "8080:8080" # Expose the port ExBin runs on if it's not meant to be accessed internally only
    environment:
      - GOOGLE_APPLICATION_CREDENTIALS=/app/google-credentials.json # If using Google services
      # Add other necessary environment variables for your configuration
    volumes:
      - ./exbin:/app # Mount the current directory to the container's working directory
      - typeform-data:/typeform-data # A named volume for Typeform data uploads, if needed
    depends_on:
      - db
    networks:
      - exbin-network

  db:
    image: postgres:latest # Use the official PostgreSQL image or a specific tag
    volumes:
      - postgres-data:/var/lib/postgresql/data # Persist database data
    environment:
      - POSTGRES_DB=exbin # The name of the default database
      - POSTGRES_USER=exbin # The default PostgreSQL username
      - POSTGRES_PASSWORD=password # The default PostgreSQL password
    networks:
      - exbin-network

volumes:
  typeform-data:
  postgres-data:

networks:
  exbin-network: