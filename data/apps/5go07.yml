version: '3.8'

services:
  web:
    image: habitrpg/habitica:latest
    ports:
      - "8080:80" # HTTP port, can be changed if you prefer a different host port
    environment:
      - TZ=Your/Timezone
      - DEBUG=True # Set to True for debugging, False otherwise
    depends_on:
      - db
    volumes:
      - "./habitica/:/data" # Mount for persisting data on the host

  db:
    image: postgres:12
    environment:
      - POSTGRES_DB=habitica
      - POSTGRES_USER=habitica
      - POSTGRES_PASSWORD=change_this_password # Change this password!
    volumes:
      - habitica-db:/var/lib/postgresql/data # Named volume for persisting database data

  redis:
    image: redis:6
    ports:
      - "6379:6379" # Redis port, can be changed if you prefer a different host port

volumes:
  habitica-db: